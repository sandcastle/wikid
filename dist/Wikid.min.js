!function(e){"use strict";function n(){}function t(e){var n=arguments;return e.replace(/{(\d+)}/g,function(e,t){var F=parseInt(t)+1;return"undefined"!=typeof n[F]?n[F]:e})}function F(){}function A(e,n){var t=this;t.kind=e,t.text=n||""}function r(e){var n=this;n._tokens=e||[],n._index=0}function u(){}function s(e){this.paragraphs=e||[]}function a(){}function B(e,n){this.kind=e,this.content=n}function i(e,n){this.number=e,this.text=n||""}function C(e){this.text=e}function c(e,n){this.kind=e,this.items=n||[]}function D(){}function o(e){this.parts=e}function E(e,n){this.kind=e,this.value=n}function f(){}function l(e){this.path=e}function h(e,n,t){this.kind=e,this.value=n,this.text=t||""}function k(){}function p(){}function g(e){var n=e.consumeConcatenatedWhile(function(n){return n.kind!=F.newline&&!e.eof()});return e.peek().kind==F.newline&&e.consume(),n}function d(e,n){var t=e.getIndex(),F=n(e);return m(F)?F:(e.setIndex(t),F)}function m(e){return"undefined"!=typeof e.success&&e.success===!0}n.toHtml=function(e,n){function F(){T+="<br>"}function A(){T+="<hr>"}function r(e){T+=C(e.content.parts),v<w.paragraphs.length-1&&(T+="<br>")}function s(e){T+=t("<blockquote>{0}</blockquote>",d(e.content.text))}function B(e){i(e),T+="<br>"}function i(e){var F=e.content.path;!/^(ftp|https?):\/\/.*/.test(F)&&n.imagePath&&(F=m(n.imagePath)+F),T+=t('<img src="{0}" alt="">',g(F))}function C(e){var n,F="";for(x=0;x<e.length;x++)if(n=e[x],n.kind!==f.none)if(n.kind!==f.a){var A="";switch(n.kind){case f.b:A="b";break;case f.em:A="em";break;case f.ins:A="ins";break;case f.del:A="del";break;case f.sup:A="sup";break;case f.sub:A="sub"}F+=t("<{0}>{1}</{0}>",A,C(n.value))}else F+=c(n);else F+=d(n.value);return F}function c(F){function A(n){var F=l(n);return""===F?d(e):t('<a name="{0}"></a>',n)}function r(e,n){var F=l(e);return""===F?d(n):t('<a href="#{0}">{1}</a>',F,d(n))}function u(e){var n=h(e);return""===n?"":t('<a href="mailto:{0}">{1}</a>',n,d(e))}function s(e,n){var F=g(e);return""===F?d(n):t('<a href="{0}" target="_blank">{1}</a>',F,d(n))}var a=F.value;switch(a.kind){case k.anc:return A(a.value);case k.gto:return r(a.value,a.text);case k.eml:return u(a.value);case k.ext:return s(a.value,a.text);case k.att:return s(m(n.attachPath)+a.value,a.text)}return""}function o(e){T+=t("<h{0}>{1}</h{0}>",e.content.number,d(e.content.text))}function E(e){var n=e.content.kind==D.ol;T+=n?"<ol>":"<ul>";for(var F=0;F<e.content.items.length;F++)T+=t("<li>{0}</li>",C(e.content.items[F].parts));T+=n?"</ol>":"</ul>"}function l(e){return P.test(e)?e:""}function h(e){return M.test(e)?e:""}function g(e){return e=encodeURI(e),_.test(e)?e:""}function d(e){return e.replace(/&/g,"&amp;").replace($,function(e){var n=e.charCodeAt(0),t=e.charCodeAt(1);return"&#"+(1024*(n-55296)+(t-56320)+65536)+";"}).replace(I,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e){return e&&0!==e.length?"/"===e.substr(e.length-1)?e:e+"/":""}e=e||"",n=n||{};var v,x,y,b=u.createIterator(e),w=p.parse(b),M=/^([A-Za-z0-9._%+-]+@\S*[^\s.;,(){}<>"])$/,_=/^((ftp|https?):                            \/\/\S*[^\s.;,()\{\}<>"])$/,P=/^[a-zA-Z0-9_\-]+$/,$=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I=/([^\#-~| |!])/g,T="";for(v=0;v<w.paragraphs.length;v++)switch(y=w.paragraphs[v],y.kind){case a.blank:F();break;case a.text:r(y);break;case a.heading:o(y);break;case a.list:E(y);break;case a.img:B(y);break;case a.rule:A();break;case a.bq:s(y)}return T},F.none=0,F.text=1,F.number=2,F.symbol=3,F.punctuation=4,F.space=5,F.newline=6,F.special=7,F.unknown=8,A.prototype.equals=function(e){return e?this.kind===e.kind&&this.text===e.text:!1},r.prototype.getIndex=function(){return this._index},r.prototype.setIndex=function(e){e<this._tokens.length&&(this._index=e)},r.prototype.consume=function(e){return("undefined"==typeof e||null===e)&&(e=1),this._index+=e,this.peek(-1)},r.prototype.consumeWhile=function(e){for(var n=this;e(n.peek())&&!n.eof();)n.consume()},r.prototype.consumeConcatenatedWhile=function(e){for(var n=this,t="";e(n.peek())&&!n.eof();)t+=n.consume().text;return t},r.prototype.consumeWhileWhitespace=function(){this.consumeWhile(function(e){return e.kind==F.space})},r.prototype.peek=function(e){return("undefined"==typeof e||null===e)&&(e=0),this._index+e<this._tokens.length?this._tokens[this._index+e]:new A(F.none)},r.prototype.count=function(){return this._tokens.length},r.prototype.remainingCount=function(){return Math.max(0,this._tokens.length-this._index)},r.prototype.eof=function(){return 0===this.remainingCount()},u.createIterator=function(e){return new r(u.tokenize(e))},u.tokenize=function(e){function n(e){for(var n=t(e),r=[],o=0,E=0;E<n.length;E++)if(u(n[E])){for(o=E;E+1<n.length&&a(n[E+1]);)E++;r.push(new A(F.text,n.substr(o,E-o+1)))}else if(s(n[E])){o=E;for(var f=F.number;E+1<n.length&&a(n[E+1]);)u(n[E+1])&&(f=F.text),E++;r.push(new A(f,n.substr(o,E-o+1)))}else D(n[E])?r.push(new A(F.special,n[E])):B(n[E])?r.push(new A(F.space," ")):i(n[E])?r.push(new A(F.newline,"\n")):C(n[E])?r.push(new A(F.symbol,n[E])):c(n[E])?r.push(new A(F.punctuation,n[E])):r.push(new A(F.unknown,""));return r}function t(e){return e=e.replace(/\r\n?|[\n\u2028\u2029]/g,"\n"),e=e.replace(/^\uFEFF/gm,"")}function r(e){function n(e){if(1==e.length)return A+="return str === "+JSON.stringify(e[0])+";";A+="switch(str){";for(var n=0;n<e.length;++n)A+="case "+JSON.stringify(e[n])+":";A+="return true}return false;"}var t,F=e.split(""),A="",r=[];e:for(t=0;t<F.length;++t){for(var u=0;u<r.length;++u)if(r[u][0].length==F[t].length){r[u].push(F[t]);continue e}r.push([F[t]])}if(r.length>3){for(r.sort(function(e,n){return n.length-e.length}),A+="switch(str.length){",t=0;t<r.length;++t){var s=r[t];A+="case "+s[0].length+":",n(s)}A+="}"}else n(F);return new Function("str",A)}function u(e){var n=e.charCodeAt(0);return n>=97&&122>=n||n>=65&&90>=n||n>=170&&f.letter.test(e)}function s(e){var n=e.charCodeAt(0);return n>=48&&57>=n}function a(e){return u(e)||s(e)}function B(e){return h(e)}function i(e){return k(e)}function C(e){return f.S.test(e)}function c(e){return f.P.test(e)}function D(e){return l(e)}e=e||"";var o,E={L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065F067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0859-085B08E4-08FE0900-0903093A-093C093E-094F0951-0957096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F8D-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135D-135F1712-17141732-1734175217531772177317B4-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAD1BE6-1BF31C24-1C371CD0-1CD21CD4-1CE81CED1CF2-1CF41DC0-1DE61DFC-1DFF20D0-20F02CEF-2CF12D7F2DE0-2DFF302A-302F3099309AA66F-A672A674-A67DA69FA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1AAEB-AAEFAAF5AAF6ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0B72-0B770BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293248-324F3251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100A700AB00B600B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E085E0964096509700AF00DF40E4F0E5A0E5B0F04-0F120F140F3A-0F3D0F850FD0-0FD40FD90FDA104A-104F10FB1360-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A194419451A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601BFC-1BFF1C3B-1C3F1C7E1C7F1CC0-1CC71CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2D702E00-2E2E2E30-2E3B3001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFAAF0AAF1ABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A600A800A900AC00AE-00B100B400B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F60482058F0606-0608060B060E060F06DE06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0D790E3F0F01-0F030F130F15-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F1390-139917DB194019DE-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B9210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23F32400-24262440-244A249C-24E92500-26FF2701-27672794-27C427C7-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-324732503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FBB2-FBC1FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD"},f={},l=r("*[]#+_^-~.<>!:"),h=r(" 	 ​᠎             　"),k=r("\n");for(o in E)f[o]=new RegExp("["+E[o].replace(/\w{4}/g,"\\u$&")+"]");return n(e)},a.blank=0,a.text=1,a.heading=2,a.list=3,a.rule=4,a.img=5,a.bq=6,a.tbl=7,D.ul=0,D.ol=1,f.none=0,f.b=1,f.em=2,f.ins=3,f.del=4,f.sup=5,f.sub=6,f.img=7,f.a=8,k.ext=0,k.att=1,k.anc=2,k.gto=3,k.eml=4,p.parse=function(e){return p.makeArticle(e)},p.makeArticle=function(e){var n=p.makeParagraphs(e);return new s(n)},p.makeParagraphs=function(e){for(var n=[];;){if(e.eof())break;var t=p.makeParagraph(e);if(!t)break;n.push(t)}return n},p.makeParagraph=function(e){if(m(p.tryMakeBlankLine(e)))return new B(a.blank,"");if(m(p.tryMakeHorizontalRule(e)))return new B(a.rule,"");var n=p.tryMakeHeading(e);if(m(n))return new B(a.heading,n.heading);var t=p.tryMakeList(e);if(m(t))return new B(a.list,t.list);var F=p.tryMakeBlockImage(e);if(m(F))return new B(a.img,F.img);var A=p.tryMakeBlockQuote(e);if(m(A))return new B(a.bq,A.bq);var r=p.tryMakeTable(e);if(m(r))return new B(a.tbl,r.tbl);var u=p.tryMakeTextParagraph(e);return m(u)?new B(a.text,u.text):null},p.tryMakeTable=function(){return{success:!1}},p.tryMakeBlockQuote=function(e){function n(e){var n=g(e),t=/^\s*bq\.\s+(.+)\s*$/.exec(n);return null===t?{success:!1}:{success:!0,bq:new C(t[1].trim())}}return d(e,n)},p.tryMakeBlockImage=function(e){function n(e){var n=g(e),t=/^\s*!([^!]+)!\s*$/.exec(n);return null===t?{success:!1}:{success:!0,img:new l(t[1])}}return d(e,n)},p.tryMakeTextParagraph=function(e){var n=p.tryMakeTextParts(e);return 0===n.length?{success:!1}:{success:!0,text:new o(n)}},p.tryMakeTextParts=function(e){for(var n=[];;){var t=d(e,p.tryMakeTextPart);if(!m(t)||null===t.part)break;if(n.length>0&&t.part.kind==f.none){var F=n[n.length-1];if(F.kind==f.none){F.value+=t.part.value;continue}}if(t.part.kind!=f.none&&t.part.kind!=f.a){var A=new r(t.part.value||[]);t.part.value=p.tryMakeTextParts(A)}n.push(t.part)}return n},p.tryMakeTextPart=function(e){if(e.eof())return{success:!1};var n=e.peek();if(n.kind==F.newline)return e.consume(),{success:!0,part:null};var t=d(e,p.tryMakeFormatPart);if(m(t))return{success:!0,part:t.part};var A=e.consume().text;A+=e.consumeConcatenatedWhile(function(e){return e.kind!=F.special&&e.kind!=F.newline});var r;return A.length>0&&(r=new E(f.none,A)),{success:null!==r,part:r}},p.tryMakeFormatPart=function(e){var n;return n=p.tryMakeFormat(e,f.b,"*"),m(n)?n:(n=p.tryMakeFormat(e,f.em,"+"),m(n)?n:(n=p.tryMakeFormat(e,f.ins,"_"),m(n)?n:(n=p.tryMakeFormat(e,f.del,"-"),m(n)?n:(n=p.tryMakeFormat(e,f.sup,"^"),m(n)?n:(n=p.tryMakeFormat(e,f.sub,"~"),m(n)?n:(n=p.tryMakeLink(e),m(n)?(console.log("XXXXXXXXX"),{success:!0,part:new E(f.a,n.link)}):{success:!1}))))))},p.tryMakeLink=function(e){function n(e){if(e.eof()||"["!==e.peek().text)return{success:!1};for(var n=!1,t="";;){if(e.eof()||e.peek().kind==F.newline)return{success:!1};var A=e.consume();if(t+=A.text,"]"===A.text){n=!0;break}}var r=/^\[\s*attach:\s*([^\]]+?)\s*\]$/.exec(t);return r?{success:!0,link:new h(k.att,r[1],r[1])}:(r=/^\[\s*a:\s*([a-zA-Z0-9_\-]+)\s*\]$/.exec(t))?{success:!0,link:new h(k.anc,r[1],"")}:(r=/^\[\s*goto:\s*([^\]]+?)\s*\|\s*([a-zA-Z0-9_\-]+)\s*\]$/.exec(t))?{success:!0,link:new h(k.gto,r[2],r[1])}:(r=/^\[\s*mailto:\s*([^\]]+?)\s*\]$/.exec(t))?{success:!0,link:new h(k.eml,r[1],r[1])}:(r=/^\[\s*([^\]]+?)\s*\|\s*([^\]\|]+?)\s*\]$/.exec(t))?{success:!0,link:new h(k.ext,r[2],r[1])}:(r=/^\[\s*([^\]]+?)\s*\]$/.exec(t),r?{success:!0,link:new h(k.ext,r[1],r[1])}:{success:!1})}return d(e,n)},p.tryMakeFormat=function(e,n,t){function A(e){e.consume();for(var A=!1,r=[];;){if(e.eof()||e.peek().kind==F.newline){A=!1;break}var u=e.consume();if(u.text===t){A=!0;break}r.push(u)}return{success:A,part:A?new E(n,r):null}}return e.eof()||e.peek().text!==t?{success:!1}:d(e,A)},p.tryMakeBlankLine=function(e){return{success:p.tryConsumeOnlyBlanksTillNewLine(e)}},p.tryMakeHorizontalRule=function(e){function n(e){var n=g(e),t=/^\s*(\-){4}\s*$/.test(n);return{success:t}}return d(e,n)},p.tryMakeHeading=function(e){function n(e){var n=g(e),t=/^\s*h([1-6]).\s+(.+)\s*$/.exec(n);return null===t||3!==t.length?{success:!1}:{success:!0,heading:new i(parseInt(t[1]),t[2].trim())}}return d(e,n)},p.tryMakeList=function(e){function n(e,n,F){for(var A=[];;){var r=d(e,function(e){return t(e,n)});if(!m(r))break;A.push({parts:r.parts})}return 0===A.length?{success:!1}:{success:!0,list:new c(F,A)}}function t(e,n){var t=g(e),F=n.exec(t);if(null===F||3!==F.length)return{success:!1};var A=u.createIterator((F[2]||"").trim()),r=p.tryMakeTextParts(A);return{success:!0,parts:r}}var F=d(e,function(e){return n(e,/^(\-|\*)\s+(.+)$/,D.ul)});return m(F)?F:d(e,function(e){return n(e,/^(#)\s+(.+)$/,D.ol)})},p.tryConsumeOnlyBlanksTillNewLine=function(e){function n(e){return e.consumeWhile(function(e){return e.kind==F.space}),e.eof()||e.peek().kind==F.newline?(e.consume(),{success:!0}):{success:!1}}return m(d(e,n))},"undefined"!=typeof define&&define.amd?define([],function(){return n}):"undefined"!=typeof module&&module.exports?module.exports=n:e.Wikid=n}(this);